<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Abstract class to encapsulate filter states
Abstract class to encapsulate filter states"><title>Abstract class to encapsulate filter states — FilterState • teal.slice</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.3/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.3/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Abstract class to encapsulate filter states — FilterState"><meta property="og:description" content="Abstract class to encapsulate filter states
Abstract class to encapsulate filter states"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><link rel="stylesheet" href="../consent.css"><script src="../consent.js" type="text/javascript" charset="utf-8"></script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">teal.slice</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.9009</small>

    <div style="width: 140px; margin-left: 0.5rem;"> <small class="nav-text text-muted me-auto">part of</small> <img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/nest.png?raw=true" alt="NEST" style="height: 30px;"><a href="https://pharmaverse.org/" class="external-link"><img src="https://github.com/insightsengineering/hex-stickers/blob/main/PNG/pharmaverse.png?raw=true" alt="pharmaverse" style="height: 28px;"></a> </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/teal-slice.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/filter-panel.html">Filter panel for NEST developers</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
<!-- start dropdown for versions --> <li class="nav-item dropdown">
        <a href="#" class="nav-link dropdown-toggle"
          data-bs-toggle="dropdown" role="button"
          aria-expanded="false" aria-haspopup="true"
          id="dropdown-versions">Versions</a> <div class="dropdown-menu" aria-labelledby="dropdown-versions"> <a class="dropdown-item" href="https://insightsengineering.github.io/teal.slice/main">main</a> </div></li>
<!-- end dropdown for versions -->
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/insightsengineering/teal.slice">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Abstract class to encapsulate filter states</h1>
      
      <div class="d-none name"><code>FilterState.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Abstract class to encapsulate filter states</p>
<p>Abstract class to encapsulate filter states</p>
    </div>


    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This class is responsible for managing single filter item within
<code>FilteredData</code> class. Filter states depend on the variable type:
(<code>logical</code>, <code>integer</code>, <code>numeric</code>, <code>factor</code>, <code>character</code>, <code>Date</code>, <code>POSIXct</code>, <code>POSIXlt</code>)
and returns <code>FilterState</code> object with class corresponding to input variable.
Class controls single filter entry in <code>module_single_filter_item</code> and returns
code relevant to selected values.</p><ul><li><p><code>factor</code>, <code>character</code>: <code>class = ChoicesFilterState</code></p></li>
<li><p><code>numeric</code>: <code>class = RangeFilterState</code></p></li>
<li><p><code>logical</code>: <code>class = LogicalFilterState</code></p></li>
<li><p><code>Date</code>: <code>class = DateFilterState</code></p></li>
<li><p><code>POSIXct</code>, <code>POSIXlt</code>: <code>class = DatetimeFilterState</code></p></li>
<li><p>all <code>NA</code> entries: <code>class: FilterState</code>, cannot be filtered</p></li>
<li><p>default: <code>FilterState</code>, cannot be filtered
<br>
Each variable's filter state is an <code>R6</code> object which contains <code>choices</code>,
<code>selected</code>, <code>varname</code>, <code>dataname</code>, <code>labels</code>, <code>na_count</code>, <code>keep_na</code> and other
variable type specific fields (<code>keep_inf</code>, <code>inf_count</code>, <code>timezone</code>).
Object contains also shiny module (<code>ui</code> and <code>server</code>) which manages
state of the filter through reactive values <code>selected</code>, <code>keep_na</code>, <code>keep_inf</code>
which trigger <code>get_call()</code> and every R function call up in reactive
chain.
<br><br></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="modifying-state">Modifying state<a class="anchor" aria-label="anchor" href="#modifying-state"></a></h2>
    

<p>Modifying a <code>FilterState</code> object is possible in three scenarios depicted below:
<img src="figures/filter_state_reactivity.jpg" width="100%" alt="Figure: filter_state_reactivity.jpg"></p><ul><li><p>In the interactive session by directly specifying values of <code>selected</code>,
<code>keep_na</code> or <code>keep_inf</code> using <code>set_state</code> method (to update all at once),
or using <code>set_selected</code>, <code>set_keep_na</code> or <code>set_keep_inf</code></p></li>
<li><p>In a <code>teal</code> application by changing appropriate inputs</p></li>
<li><p>Using methods <code>set_selected_reactive</code>, <code>set_keep_na_reactive</code>,
<code>set_keep_inf_reactive</code> which serves as a programmatic API.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-FilterState-new"><code>FilterState$new()</code></a></p></li>
<li><p><a href="#method-FilterState-destroy_observers"><code>FilterState$destroy_observers()</code></a></p></li>
<li><p><a href="#method-FilterState-format"><code>FilterState$format()</code></a></p></li>
<li><p><a href="#method-FilterState-get_call"><code>FilterState$get_call()</code></a></p></li>
<li><p><a href="#method-FilterState-get_dataname"><code>FilterState$get_dataname()</code></a></p></li>
<li><p><a href="#method-FilterState-get_keep_na"><code>FilterState$get_keep_na()</code></a></p></li>
<li><p><a href="#method-FilterState-get_varlabel"><code>FilterState$get_varlabel()</code></a></p></li>
<li><p><a href="#method-FilterState-get_varname"><code>FilterState$get_varname()</code></a></p></li>
<li><p><a href="#method-FilterState-get_selected"><code>FilterState$get_selected()</code></a></p></li>
<li><p><a href="#method-FilterState-get_state"><code>FilterState$get_state()</code></a></p></li>
<li><p><a href="#method-FilterState-print"><code>FilterState$print()</code></a></p></li>
<li><p><a href="#method-FilterState-set_keep_na"><code>FilterState$set_keep_na()</code></a></p></li>
<li><p><a href="#method-FilterState-set_keep_na_reactive"><code>FilterState$set_keep_na_reactive()</code></a></p></li>
<li><p><a href="#method-FilterState-set_na_rm"><code>FilterState$set_na_rm()</code></a></p></li>
<li><p><a href="#method-FilterState-set_selected"><code>FilterState$set_selected()</code></a></p></li>
<li><p><a href="#method-FilterState-set_selected_reactive"><code>FilterState$set_selected_reactive()</code></a></p></li>
<li><p><a href="#method-FilterState-set_state"><code>FilterState$set_state()</code></a></p></li>
<li><p><a href="#method-FilterState-set_state_reactive"><code>FilterState$set_state_reactive()</code></a></p></li>
<li><p><a href="#method-FilterState-server"><code>FilterState$server()</code></a></p></li>
<li><p><a href="#method-FilterState-ui"><code>FilterState$ui()</code></a></p></li>
<li><p><a href="#method-FilterState-clone"><code>FilterState$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-FilterState-new"></a><div class="section">
<h3 id="method-new-">Method <code><a href="https://rdrr.io/r/methods/new.html" class="external-link">new()</a></code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Initialize a <code>FilterState</code> object</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/FilterState.html">FilterState</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">varname</span>,</span>
<span>  varlabel <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>,</span>
<span>  input_dataname <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  extract_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>x</code></dt>
<dd><p>(<code>vector</code>)<br>
values of the variable used in filter</p></dd>


<dt><code>varname</code></dt>
<dd><p>(<code>character</code>, <code>name</code>)<br>
name of the variable</p></dd>


<dt><code>varlabel</code></dt>
<dd><p>(<code>character(1)</code>)<br>
label of the variable (optional).</p></dd>


<dt><code>input_dataname</code></dt>
<dd><p>(<code>name</code> or <code>call</code>)<br>
name of dataset where <code>x</code> is taken from. Must be specified if <code>extract_type</code> argument
is not empty.</p></dd>


<dt><code>extract_type</code></dt>
<dd><p>(<code>character(0)</code>, <code>character(1)</code>)<br>
whether condition calls should be prefixed by dataname. Possible values:</p><ul><li><p><code>character(0)</code> (default) <code>varname</code> in the condition call will not be prefixed</p></li>
<li><p><code>"list"</code> <code>varname</code> in the condition call will be returned as <code>&lt;input_dataname&gt;$&lt;varname&gt;</code></p></li>
<li><p><code>"matrix"</code> <code>varname</code> in the condition call will be returned as <code>&lt;input_dataname&gt;[, &lt;varname&gt;]</code></p></li>
</ul></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-FilterState-destroy_observers"></a><div class="section">
<h3 id="method-destroy-observers-">Method <code>destroy_observers()</code><a class="anchor" aria-label="anchor" href="#method-destroy-observers-"></a></h3>
<p>Destroy observers stored in <code>private$observers</code>.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">destroy_observers</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-FilterState-format"></a><div class="section">
<h3 id="method-format-">Method <code><a href="https://rdrr.io/r/base/format.html" class="external-link">format()</a></code><a class="anchor" aria-label="anchor" href="#method-format-"></a></h3>
<p>Returns a formatted string representing this <code>FilterState</code>.</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">format</span><span class="op">(</span>indent <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>indent</code></dt>
<dd><p>(<code>numeric(1)</code>) the number of spaces before after each new line character of the formatted string.
Default: 0</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p><code>character(1)</code> the formatted string</p>
</div>

</div><p></p><hr><a id="method-FilterState-get_call"></a><div class="section">
<h3 id="method-get-call-">Method <code>get_call()</code><a class="anchor" aria-label="anchor" href="#method-get-call-"></a></h3>
<p>Returns reproducible condition call for current selection relevant
for selected variable type.
Method is using internal reactive values which makes it reactive
and must be executed in reactive or isolated context.</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">get_call</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-FilterState-get_dataname"></a><div class="section">
<h3 id="method-get-dataname-">Method <code><a href="https://rdrr.io/pkg/teal.data/man/get_dataname.html" class="external-link">get_dataname()</a></code><a class="anchor" aria-label="anchor" href="#method-get-dataname-"></a></h3>
<p>Returns dataname</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">get_dataname</span><span class="op">(</span>deparse <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deparse</code></dt>
<dd><p>(<code>logical(1)</code>)<br>
whether dataname should be deparsed. <code>TRUE</code> by default</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>(<code>name</code> or <code>character(1)</code>)</p>
</div>

</div><p></p><hr><a id="method-FilterState-get_keep_na"></a><div class="section">
<h3 id="method-get-keep-na-">Method <code>get_keep_na()</code><a class="anchor" aria-label="anchor" href="#method-get-keep-na-"></a></h3>
<p>Returns current <code>keep_na</code> selection</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">get_keep_na</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-2">Returns<a class="anchor" aria-label="anchor" href="#returns-2"></a></h4>
<p>(<code>logical(1)</code>)</p>
</div>

</div><p></p><hr><a id="method-FilterState-get_varlabel"></a><div class="section">
<h3 id="method-get-varlabel-">Method <code>get_varlabel()</code><a class="anchor" aria-label="anchor" href="#method-get-varlabel-"></a></h3>
<p>Returns variable label</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">get_varlabel</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-3">Returns<a class="anchor" aria-label="anchor" href="#returns-3"></a></h4>
<p>(<code>character(1)</code>)</p>
</div>

</div><p></p><hr><a id="method-FilterState-get_varname"></a><div class="section">
<h3 id="method-get-varname-">Method <code>get_varname()</code><a class="anchor" aria-label="anchor" href="#method-get-varname-"></a></h3>
<p>Get variable name</p><div class="section">
<h4 id="usage-7">Usage<a class="anchor" aria-label="anchor" href="#usage-7"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">get_varname</span><span class="op">(</span>deparse <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deparse</code></dt>
<dd><p>(<code>logical(1)</code>)<br>
whether variable name should be deparsed. <code>FALSE</code> by default</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-4">Returns<a class="anchor" aria-label="anchor" href="#returns-4"></a></h4>
<p>(<code>name</code> or <code>character(1)</code>)</p>
</div>

</div><p></p><hr><a id="method-FilterState-get_selected"></a><div class="section">
<h3 id="method-get-selected-">Method <code>get_selected()</code><a class="anchor" aria-label="anchor" href="#method-get-selected-"></a></h3>
<p>Get selected values from <code>FilterState</code></p><div class="section">
<h4 id="usage-8">Usage<a class="anchor" aria-label="anchor" href="#usage-8"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">get_selected</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-5">Returns<a class="anchor" aria-label="anchor" href="#returns-5"></a></h4>
<p>class of the returned object depends of class of the <code>FilterState</code></p>
</div>

</div><p></p><hr><a id="method-FilterState-get_state"></a><div class="section">
<h3 id="method-get-state-">Method <code>get_state()</code><a class="anchor" aria-label="anchor" href="#method-get-state-"></a></h3>
<p>Returns the filtering state.</p><div class="section">
<h4 id="usage-9">Usage<a class="anchor" aria-label="anchor" href="#usage-9"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">get_state</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-6">Returns<a class="anchor" aria-label="anchor" href="#returns-6"></a></h4>
<p><code>list</code> containing values taken from the reactive fields:</p><ul><li><p><code>selected</code> (<code>atomic</code>) length depends on a <code>FilterState</code> variant.</p></li>
<li><p><code>keep_na</code> (<code>logical(1)</code>) whether <code>NA</code> should be kept.</p></li>
</ul></div>

</div><p></p><hr><a id="method-FilterState-print"></a><div class="section">
<h3 id="method-print-">Method <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code><a class="anchor" aria-label="anchor" href="#method-print-"></a></h3>
<p>Prints this <code>FilterState</code> object</p><div class="section">
<h4 id="usage-10">Usage<a class="anchor" aria-label="anchor" href="#usage-10"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">print</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>...</code></dt>
<dd><p>additional arguments to this method</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-FilterState-set_keep_na"></a><div class="section">
<h3 id="method-set-keep-na-">Method <code>set_keep_na()</code><a class="anchor" aria-label="anchor" href="#method-set-keep-na-"></a></h3>
<p>Set if <code>NA</code> should be kept</p><div class="section">
<h4 id="usage-11">Usage<a class="anchor" aria-label="anchor" href="#usage-11"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">set_keep_na</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-5">Arguments<a class="anchor" aria-label="anchor" href="#arguments-5"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>(<code>logical(1)</code>)<br>
value(s) which come from the filter selection. Value is set in <code>server</code>
modules after selecting check-box-input in the shiny interface. Values are set to
<code>private$keep_na</code> which is reactive.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-FilterState-set_keep_na_reactive"></a><div class="section">
<h3 id="method-set-keep-na-reactive-">Method <code>set_keep_na_reactive()</code><a class="anchor" aria-label="anchor" href="#method-set-keep-na-reactive-"></a></h3>
<p>Set if <code>NA</code> should be kept when using <code>set_filter_state</code></p><div class="section">
<h4 id="usage-12">Usage<a class="anchor" aria-label="anchor" href="#usage-12"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">set_keep_na_reactive</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-6">Arguments<a class="anchor" aria-label="anchor" href="#arguments-6"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>(<code>logical(1)</code>)<br>
value(s) which come from the filter selection. Value is set in <code>server</code>
modules when using <code>set_filter_state</code> instead of the shiny interface. Values are set to
<code>private$keep_na_reactive</code> which is reactive.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-FilterState-set_na_rm"></a><div class="section">
<h3 id="method-set-na-rm-">Method <code>set_na_rm()</code><a class="anchor" aria-label="anchor" href="#method-set-na-rm-"></a></h3>
<p>Some methods needs additional <code>!is.na(varame)</code> condition to not include
missing values. When <code>private$na_rm = TRUE</code> is set, <code>self$get_call</code> returns
condition extended by <code>!is.na</code> condition.</p><div class="section">
<h4 id="usage-13">Usage<a class="anchor" aria-label="anchor" href="#usage-13"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">set_na_rm</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-7">Arguments<a class="anchor" aria-label="anchor" href="#arguments-7"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>(<code>logical(1)</code>) when <code>TRUE</code>, <code>FilterState$get_call</code> appends an expression
removing <code>NA</code> values to the filter expression returned by <code>get_call</code></p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-FilterState-set_selected"></a><div class="section">
<h3 id="method-set-selected-">Method <code>set_selected()</code><a class="anchor" aria-label="anchor" href="#method-set-selected-"></a></h3>
<p>Set selection</p><div class="section">
<h4 id="usage-14">Usage<a class="anchor" aria-label="anchor" href="#usage-14"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">set_selected</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-8">Arguments<a class="anchor" aria-label="anchor" href="#arguments-8"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>(<code>vector</code>)<br>
value(s) which come from the filter selection. Values are set in <code>server</code>
module after choosing value in app interface. Values are set to
<code>private$selected</code> which is reactive. Values type have to be the
same as <code>private$choices</code>.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-FilterState-set_selected_reactive"></a><div class="section">
<h3 id="method-set-selected-reactive-">Method <code>set_selected_reactive()</code><a class="anchor" aria-label="anchor" href="#method-set-selected-reactive-"></a></h3>
<p>Set selection when using <code>set_filter_state</code></p><div class="section">
<h4 id="usage-15">Usage<a class="anchor" aria-label="anchor" href="#usage-15"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">set_selected_reactive</span><span class="op">(</span><span class="va">value</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-9">Arguments<a class="anchor" aria-label="anchor" href="#arguments-9"></a></h4>
<p></p><div class="arguments"><dl><dt><code>value</code></dt>
<dd><p>(<code>vector</code>)<br>
value(s) which come from the filters set by the user. Values are set in <code>server</code>
modules after setting filters in <code>set_filter_state</code>. Values are set to
<code>private$set_selected_reactive</code> which is reactive. Values type have to be the
same as <code>private$choices</code>.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-FilterState-set_state"></a><div class="section">
<h3 id="method-set-state-">Method <code><a href="set_state.html">set_state()</a></code><a class="anchor" aria-label="anchor" href="#method-set-state-"></a></h3>
<p>Set state</p><div class="section">
<h4 id="usage-16">Usage<a class="anchor" aria-label="anchor" href="#usage-16"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">set_state</span><span class="op">(</span><span class="va">state</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-10">Arguments<a class="anchor" aria-label="anchor" href="#arguments-10"></a></h4>
<p></p><div class="arguments"><dl><dt><code>state</code></dt>
<dd><p>(<code>list</code>)<br>
contains fields relevant for a specific class</p><ul><li><p><code>selected</code> defines initial selection</p></li>
<li><p><code>keep_na</code> (<code>logical</code>) defines whether to keep or remove <code>NA</code> values</p></li>
</ul></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-FilterState-set_state_reactive"></a><div class="section">
<h3 id="method-set-state-reactive-">Method <code>set_state_reactive()</code><a class="anchor" aria-label="anchor" href="#method-set-state-reactive-"></a></h3>
<p>Set state when using <code>set_filter_state</code></p><div class="section">
<h4 id="usage-17">Usage<a class="anchor" aria-label="anchor" href="#usage-17"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">set_state_reactive</span><span class="op">(</span><span class="va">state</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-11">Arguments<a class="anchor" aria-label="anchor" href="#arguments-11"></a></h4>
<p></p><div class="arguments"><dl><dt><code>state</code></dt>
<dd><p>(<code>list</code>)<br>
contains fields relevant for a specific class</p><ul><li><p><code>selected</code> defines initial selection</p></li>
<li><p><code>keep_na</code> (<code>logical</code>) defines whether to keep or remove <code>NA</code> values</p></li>
</ul></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-FilterState-server"></a><div class="section">
<h3 id="method-server-">Method <code>server()</code><a class="anchor" aria-label="anchor" href="#method-server-"></a></h3>
<p>Server module</p><div class="section">
<h4 id="usage-18">Usage<a class="anchor" aria-label="anchor" href="#usage-18"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">server</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-12">Arguments<a class="anchor" aria-label="anchor" href="#arguments-12"></a></h4>
<p></p><div class="arguments"><dl><dt><code>id</code></dt>
<dd><p>(<code>character(1)</code>)<br>
an ID string that corresponds with the ID used to call the module's UI function.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns-7">Returns<a class="anchor" aria-label="anchor" href="#returns-7"></a></h4>
<p><code>moduleServer</code> function which returns <code>NULL</code></p>
</div>

</div><p></p><hr><a id="method-FilterState-ui"></a><div class="section">
<h3 id="method-ui-">Method <code>ui()</code><a class="anchor" aria-label="anchor" href="#method-ui-"></a></h3>
<p>UI Module</p><div class="section">
<h4 id="usage-19">Usage<a class="anchor" aria-label="anchor" href="#usage-19"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">ui</span><span class="op">(</span><span class="va">id</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-13">Arguments<a class="anchor" aria-label="anchor" href="#arguments-13"></a></h4>
<p></p><div class="arguments"><dl><dt><code>id</code></dt>
<dd><p>(<code>character(1)</code>)<br>
id of shiny element. UI for this class contains simple message
informing that it's not supported
description
Adds <code>is.na(varname)</code> before existing condition calls if <code>keep_na</code> is selected.
Otherwise, if missings are found in the variable <code>!is.na</code> will be added
only if <code>private$na_rm = TRUE</code>
return (<code>call</code>)
description
Prefixed (or not) variable</p>
<p>Return variable name needed to condition call.
If <code>isTRUE(private$use_dataset)</code> variable is prefixed by
dataname to be evaluated as extracted object, for example
<code>data$var</code>
return (<code>name</code> or <code>call</code>)
Sets <code>keep_na</code> field according to observed <code>input$keep_na</code>
If <code>keep_na = TRUE</code> <code>is.na(varname)</code> is added to the returned call.
Otherwise returned call excludes <code>NA</code> when executed.
Sets <code>keep_na</code> field according to <code>keep_na</code> value passed in <code>set_filter_state</code>.
If <code>keep_na = TRUE</code> <code>is.na(varname)</code> is added to the returned call.
Otherwise returned call excludes <code>NA</code> when executed.
Set choices</p>
<p>Set choices is supposed to be executed once in the constructor
to define set/range which selection is made from.
parameter choices (<code>vector</code>)<br>
class of the vector depends on the <code>FilterState</code> class.
return a <code>NULL</code></p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-FilterState-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-20">Usage<a class="anchor" aria-label="anchor" href="#usage-20"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">FilterState</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-14">Arguments<a class="anchor" aria-label="anchor" href="#arguments-14"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="nest">
  <p>teal.slice is a part of the <strong>NEST</strong> and <a href="https://pharmaverse.org/" class="external-link"><strong>pharmaverse</strong></a>.</p>
</div>
<script type="text/javascript" src="../analytics.js"></script></footer></div>

  

  

  </body></html>

